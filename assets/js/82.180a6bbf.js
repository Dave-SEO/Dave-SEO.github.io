(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{641:function(s,t,a){"use strict";a.r(t);var n=a(3),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("Boxx"),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#云开发优势"}},[s._v("云开发优势")])]),a("li",[a("a",{attrs:{href:"#云开发基础能力"}},[s._v("云开发基础能力")])]),a("li",[a("a",{attrs:{href:"#tcb-router"}},[s._v("tcb-router")])]),a("li",[a("a",{attrs:{href:"#渲染层和逻辑层"}},[s._v("渲染层和逻辑层")])]),a("li",[a("a",{attrs:{href:"#小程序性能与优化"}},[s._v("小程序性能与优化")])]),a("li",[a("a",{attrs:{href:"#小程序检测是否有新版本"}},[s._v("小程序检测是否有新版本")])]),a("li",[a("a",{attrs:{href:"#小程序的生命周期"}},[s._v("小程序的生命周期")])]),a("li",[a("a",{attrs:{href:"#setdate工作原理"}},[s._v("setDate工作原理")])]),a("li",[a("a",{attrs:{href:"#组件具有样式隔离"}},[s._v("组件具有样式隔离")])]),a("li",[a("a",{attrs:{href:"#引入样式的方式-externalclasses"}},[s._v("引入样式的方式：externalclasses")])]),a("li",[a("a",{attrs:{href:"#引入样式的方式-styleisolation"}},[s._v("引入样式的方式：styleIsolation")])]),a("li",[a("a",{attrs:{href:"#启用多个插槽"}},[s._v("启用多个插槽")])]),a("li",[a("a",{attrs:{href:"#图片上传"}},[s._v("图片上传")])]),a("li",[a("a",{attrs:{href:"#获取服务端时间"}},[s._v("获取服务端时间")])]),a("li",[a("a",{attrs:{href:"#小程序端操作云数据库"}},[s._v("小程序端操作云数据库")])]),a("li",[a("a",{attrs:{href:"#下拉刷新需在json中手动开启"}},[s._v("下拉刷新需在json中手动开启")])]),a("li",[a("a",{attrs:{href:"#小程序的两种事件绑定"}},[s._v("小程序的两种事件绑定")])]),a("li",[a("a",{attrs:{href:"#当前页面调用上一个页面的方法"}},[s._v("当前页面调用上一个页面的方法")])]),a("li",[a("a",{attrs:{href:"#云数据库模糊查询"}},[s._v("云数据库模糊查询")])]),a("li",[a("a",{attrs:{href:"#云数据库索引管理"}},[s._v("云数据库索引管理")])]),a("li",[a("a",{attrs:{href:"#查询云数据库的限制"}},[s._v("查询云数据库的限制")])]),a("li",[a("a",{attrs:{href:"#云数据库1对多关系的设计方式"}},[s._v("云数据库1对多关系的设计方式")])]),a("li",[a("a",{attrs:{href:"#云调用实现模板消息推送"}},[s._v("云调用实现模板消息推送")])]),a("li",[a("a",{attrs:{href:"#几种获取用户信息的方式"}},[s._v("几种获取用户信息的方式")])]),a("li",[a("a",{attrs:{href:"#unionid-在小程序-微信公众号中唯一"}},[s._v("unionid 在小程序，微信公众号中唯一")])]),a("li",[a("a",{attrs:{href:"#disablescroll-页面是否拖动"}},[s._v("disableScroll 页面是否拖动")])]),a("li",[a("a",{attrs:{href:"#小程序背景图"}},[s._v("小程序背景图")])]),a("li",[a("a",{attrs:{href:"#云调用开放能力需在云函数json文件中配置"}},[s._v("云调用开放能力需在云函数json文件中配置")])]),a("li",[a("a",{attrs:{href:"#场景值scene"}},[s._v("场景值scene")])]),a("li",[a("a",{attrs:{href:"#页面收录-sitemap"}},[s._v("页面收录 sitemap")])]),a("li",[a("a",{attrs:{href:"#后端调用小程序云开发"}},[s._v("后端调用小程序云开发")])]),a("li",[a("a",{attrs:{href:"#仿网易云音乐实现云开发项目"}},[s._v("仿网易云音乐实现云开发项目")])])])]),a("p"),s._v(" "),a("h2",{attrs:{id:"云开发优势"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云开发优势"}},[s._v("#")]),s._v(" 云开发优势")]),s._v(" "),a("ul",[a("li",[s._v("快速上线")]),s._v(" "),a("li",[s._v("专注核心业务")]),s._v(" "),a("li",[s._v("独立开发一个完整的微信小程序")]),s._v(" "),a("li",[s._v("不需要学习新的语言，只需要掌握JavaScript")]),s._v(" "),a("li",[s._v("无需运维，节约成本")]),s._v(" "),a("li",[s._v("数据安全")]),s._v(" "),a("li",[s._v("无需域名与服务器（自带腾讯云服务）")])]),s._v(" "),a("h2",{attrs:{id:"云开发基础能力"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云开发基础能力"}},[s._v("#")]),s._v(" 云开发基础能力")]),s._v(" "),a("ul",[a("li",[s._v("云函数（类似后端）：在云端运行的代码，微信私有协议天然鉴权")]),s._v(" "),a("li",[s._v("云数据库：一个既可以在小程序端操作又可以在云函数中操作的JSON数据库")]),s._v(" "),a("li",[s._v("云存储：在云端存储文件，可以在云端控制台可视化管理")]),s._v(" "),a("li",[s._v("云调用：基于云函数免鉴权使用小程序开放接口的能力")]),s._v(" "),a("li",[s._v("HTTP API：使用HTTP API 开发者可在已有服务器上访问云资源，实现于云开发的互通")])]),s._v(" "),a("h2",{attrs:{id:"tcb-router"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tcb-router"}},[s._v("#")]),s._v(" tcb-router")]),s._v(" "),a("ul",[a("li",[s._v("一个用户在一个云环境中只能创建50个云函数")]),s._v(" "),a("li",[s._v("相似的请求归类到同一个云函数处理")]),s._v(" "),a("li",[s._v("tcb-router 是一个koa风格的云函数路由库")])]),s._v(" "),a("h2",{attrs:{id:"渲染层和逻辑层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#渲染层和逻辑层"}},[s._v("#")]),s._v(" 渲染层和逻辑层")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://res.wx.qq.com/wxdoc/dist/assets/img/4-1.ad156d1c.png",alt:""}})]),s._v(" "),a("ul",[a("li",[s._v("小程序的渲染层和逻辑层分别由2个线程管理：渲染层的界面使用了WebView 进行渲染；逻辑层采用JsCore线程运行JS脚本。一个小程序存在多个界面，所以渲染层存在多个WebView线程，这两个线程的通信会经由微信客户端做中转，逻辑层发送网络请求也经由Native转发")]),s._v(" "),a("li",[s._v("所以频繁的setData 会造成资源消耗，如某些值不需要在页面使用，就不要在data属性中定义，外部定义变量即可")]),s._v(" "),a("li",[s._v("避免setDate数据量过大，限制最大1M")])]),s._v(" "),a("h2",{attrs:{id:"小程序性能与优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小程序性能与优化"}},[s._v("#")]),s._v(" 小程序性能与优化")]),s._v(" "),a("ul",[a("li",[s._v("合理设置可点击元素的区域大小")]),s._v(" "),a("li",[s._v("避免渲染页面耗时过长")]),s._v(" "),a("li",[s._v("避免执行脚本耗时过长")]),s._v(" "),a("li",[s._v("网络请求做缓存")]),s._v(" "),a("li",[s._v("不要引入未使用的wxss、wxml")]),s._v(" "),a("li",[s._v("所以资源使用HTTPS")]),s._v(" "),a("li",[s._v("避免过大的wxml节点数目\n"),a("ol",[a("li",[s._v("一个页面少于1000个wxml节点")]),s._v(" "),a("li",[s._v("节点数深度少于30层")]),s._v(" "),a("li",[s._v("子节点树不大于60个")])])]),s._v(" "),a("li",[s._v("避免短时间发起太多的图片请求")]),s._v(" "),a("li",[s._v("避免setData 的数据过大")]),s._v(" "),a("li",[s._v("避免setData 频繁调用")]),s._v(" "),a("li",[s._v("使用小程序开发工具中控制台提供的 audits 检测可以优化的点")])]),s._v(" "),a("h2",{attrs:{id:"小程序检测是否有新版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小程序检测是否有新版本"}},[s._v("#")]),s._v(" 小程序检测是否有新版本")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" updateManager "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUpdateManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    updateManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("onCheckForUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("res")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hasUpdate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            updateManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("onUpdateReady")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("showModal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    title"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'提示'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    content"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'当前有新版本'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("success")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("confirm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                            updateManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("applyUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h2",{attrs:{id:"小程序的生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小程序的生命周期"}},[s._v("#")]),s._v(" 小程序的生命周期")]),s._v(" "),a("figure",{staticClass:"third"},[a("img",{attrs:{src:"/blog/img/wechat/Launch.png",width:"800px"}})]),s._v(" "),a("h2",{attrs:{id:"setdate工作原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setdate工作原理"}},[s._v("#")]),s._v(" setDate工作原理")]),s._v(" "),a("p",[s._v("data中定义数据进行setData时由逻辑层发送到系统层，再由系统层发送到视图层进行渲染，所以setDate是异步的")]),s._v(" "),a("h2",{attrs:{id:"组件具有样式隔离"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件具有样式隔离"}},[s._v("#")]),s._v(" 组件具有样式隔离")]),s._v(" "),a("h2",{attrs:{id:"引入样式的方式-externalclasses"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引入样式的方式-externalclasses"}},[s._v("#")]),s._v(" 引入样式的方式：externalclasses")]),s._v(" "),a("ul",[a("li",[s._v("允许组件传入外部的样式类")])]),s._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("search")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("iconfont")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("iconfont"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n // 子组件\n externalclasses：[\n    'iconfont'\n ]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"引入样式的方式-styleisolation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引入样式的方式-styleisolation"}},[s._v("#")]),s._v(" 引入样式的方式：styleIsolation")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    styleIsolation"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'apply-shared'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"启用多个插槽"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启用多个插槽"}},[s._v("#")]),s._v(" 启用多个插槽")]),s._v(" "),a("ul",[a("li",[s._v("multioleSlots")])]),s._v(" "),a("h2",{attrs:{id:"图片上传"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图片上传"}},[s._v("#")]),s._v(" 图片上传")]),s._v(" "),a("ul",[a("li",[s._v("云储存只支持单文件上传")]),s._v(" "),a("li",[s._v("wx.cloud.uploadFile")]),s._v(" "),a("li",[s._v("图片存储到云存储中拿到fileID")]),s._v(" "),a("li",[s._v("数据（fileID、openid...）存储到云数据库中")])]),s._v(" "),a("h2",{attrs:{id:"获取服务端时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取服务端时间"}},[s._v("#")]),s._v(" 获取服务端时间")]),s._v(" "),a("ul",[a("li",[s._v("db.serverDate()")])]),s._v(" "),a("h2",{attrs:{id:"小程序端操作云数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小程序端操作云数据库"}},[s._v("#")]),s._v(" 小程序端操作云数据库")]),s._v(" "),a("ul",[a("li",[s._v("openid 会自动带入，不需要手动传")]),s._v(" "),a("li",[s._v("初始化db  wx.cloud.database()")]),s._v(" "),a("li",[s._v("获取集合 db.collection('name').add({data:{}})")])]),s._v(" "),a("h2",{attrs:{id:"下拉刷新需在json中手动开启"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下拉刷新需在json中手动开启"}},[s._v("#")]),s._v(" 下拉刷新需在json中手动开启")]),s._v(" "),a("ul",[a("li",[s._v("enablePullDownRefresh: true")]),s._v(" "),a("li",[s._v("手动取消下拉刷新 wx.stopPullDownfresh()")])]),s._v(" "),a("h2",{attrs:{id:"小程序的两种事件绑定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小程序的两种事件绑定"}},[s._v("#")]),s._v(" 小程序的两种事件绑定")]),s._v(" "),a("ul",[a("li",[s._v("bindtap 存在事件冒泡")]),s._v(" "),a("li",[s._v("catchtap 阻止冒泡")])]),s._v(" "),a("h2",{attrs:{id:"当前页面调用上一个页面的方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#当前页面调用上一个页面的方法"}},[s._v("#")]),s._v(" 当前页面调用上一个页面的方法")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取页面")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" pages "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCurrentPages")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 取到上一个页面")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" prevpage "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("pages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    prevpage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("onPullDownfresh")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"云数据库模糊查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云数据库模糊查询"}},[s._v("#")]),s._v(" 云数据库模糊查询")]),s._v(" "),a("ul",[a("li",[s._v("db.RegExp")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("eg"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("查询content字段\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" w "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nw "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    content"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("RegExp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        regexp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" keword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'i'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \ndb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("collection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("where")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("w"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"云数据库索引管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云数据库索引管理"}},[s._v("#")]),s._v(" 云数据库索引管理")]),s._v(" "),a("ul",[a("li",[s._v("用空间换时间")])]),s._v(" "),a("h2",{attrs:{id:"查询云数据库的限制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询云数据库的限制"}},[s._v("#")]),s._v(" 查询云数据库的限制")]),s._v(" "),a("ul",[a("li",[s._v("小程序端使用一次最多二十条")]),s._v(" "),a("li",[s._v("云函数中 100条")])]),s._v(" "),a("h2",{attrs:{id:"云数据库1对多关系的设计方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云数据库1对多关系的设计方式"}},[s._v("#")]),s._v(" 云数据库1对多关系的设计方式")]),s._v(" "),a("h2",{attrs:{id:"云调用实现模板消息推送"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云调用实现模板消息推送"}},[s._v("#")]),s._v(" 云调用实现模板消息推送")]),s._v(" "),a("ul",[a("li",[s._v("云调用是基于云函数调用服务端的开放接口")]),s._v(" "),a("li",[s._v('模版必须用form包裹，report-submit="true"')]),s._v(" "),a("li",[s._v("实现模版消息推送需要配置消息模版（微信公众平台->模版消息）")]),s._v(" "),a("li",[s._v("新建云函数 配置config.json")])]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"permissions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"openapi"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"templateMessage.send"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ul",[a("li",[s._v("云函数中实现推送")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 云函数")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OPENID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cloud"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getWXContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    cloud"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("openapi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("templateMessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        touser"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OPENID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        page"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/pages/xxx/xxx?id=21312'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            keyword1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'评价完成'")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("，\n            keyword2"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'评论信息'")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("，\n        templateId"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        formId"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("ul",[a("li",[s._v("form事件中 formId 推送时效为7天，如果7天内没有推送则失效")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// form组件会触发一个bindsubmit事件处理函数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("form report"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("submit"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(" bindsubmit"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"send"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("input name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'content'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("button form"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"submit"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("form"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"几种获取用户信息的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#几种获取用户信息的方式"}},[s._v("#")]),s._v(" 几种获取用户信息的方式")]),s._v(" "),a("ul",[a("li",[s._v("open-data")])]),s._v(" "),a("ol",[a("li",[s._v("不需要授权，仅页面展示可用，js无法获取")])]),s._v(" "),a("ul",[a("li",[s._v("js获取 wx.getUserInfo，仅授权后使用")]),s._v(" "),a("li",[s._v("button (无法获取到openid)")])]),s._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("button")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("open-type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("getUserInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("bindgetuserinfo")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("ongetUserinfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("openid 的获取")])]),s._v(" "),a("ol",[a("li",[s._v("传统方式：后端获取传回前端")]),s._v(" "),a("li",[s._v("前端调用云函数获取")])]),s._v(" "),a("h2",{attrs:{id:"unionid-在小程序-微信公众号中唯一"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unionid-在小程序-微信公众号中唯一"}},[s._v("#")]),s._v(" unionid 在小程序，微信公众号中唯一")]),s._v(" "),a("h2",{attrs:{id:"disablescroll-页面是否拖动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#disablescroll-页面是否拖动"}},[s._v("#")]),s._v(" disableScroll 页面是否拖动")]),s._v(" "),a("h2",{attrs:{id:"小程序背景图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小程序背景图"}},[s._v("#")]),s._v(" 小程序背景图")]),s._v(" "),a("ul",[a("li",[s._v("无法使用本地图片")]),s._v(" "),a("li",[s._v("可以使用网络图片或者base64图片")])]),s._v(" "),a("h2",{attrs:{id:"云调用开放能力需在云函数json文件中配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云调用开放能力需在云函数json文件中配置"}},[s._v("#")]),s._v(" 云调用开放能力需在云函数json文件中配置")]),s._v(" "),a("h2",{attrs:{id:"场景值scene"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#场景值scene"}},[s._v("#")]),s._v(" 场景值scene")]),s._v(" "),a("ul",[a("li",[s._v("当前进入小程序的方式")]),s._v(" "),a("li",[s._v("可在app.js中获取")])]),s._v(" "),a("h2",{attrs:{id:"页面收录-sitemap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#页面收录-sitemap"}},[s._v("#")]),s._v(" 页面收录 sitemap")]),s._v(" "),a("ul",[a("li",[s._v("相当于网页的seo")])]),s._v(" "),a("h2",{attrs:{id:"后端调用小程序云开发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#后端调用小程序云开发"}},[s._v("#")]),s._v(" 后端调用小程序云开发")]),s._v(" "),a("ul",[a("li",[s._v("HTTP API")]),s._v(" "),a("li",[s._v("tcb-admin-node")])]),s._v(" "),a("h2",{attrs:{id:"仿网易云音乐实现云开发项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#仿网易云音乐实现云开发项目"}},[s._v("#")]),s._v(" 仿网易云音乐实现云开发项目")]),s._v(" "),a("div",{staticClass:"language-JavaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("https"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Dave"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SEO")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wxmusic\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])],1)}),[],!1,null,null,null);t.default=r.exports}}]);
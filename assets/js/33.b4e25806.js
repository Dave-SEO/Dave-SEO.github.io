(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{593:function(n,s,a){"use strict";a.r(s);var t=a(3),e=Object(t.a)({},(function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h5",{attrs:{id:"用户权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户权限"}},[n._v("#")]),n._v(" 用户权限")]),n._v(" "),a("p",[n._v("想要向用户显示通知消息，需要获取用户权限，而相同的域名只需要获取一次权限。只有用户允许的权限下，Notification 才能起到作用，避免某些网站的广告滥用 Notification 或其它给用户造成影响\nNotification.permission 该属性用于表明当前通知显示的授权状态，可能的值包括：")]),n._v(" "),a("ol",[a("li",[n._v("default ：不知道用户的选择，默认。")]),n._v(" "),a("li",[n._v("granted ：用户允许。")]),n._v(" "),a("li",[n._v("denied ：用户拒绝。")])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("if(Notification.permission === 'granted'){\n    console.log('用户允许通知');\n}else if(Notification.permission === 'denied'){\n    console.log('用户拒绝通知');\n}else{\n    console.log('用户还没选择，去向用户申请权限吧');\n}\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br")])]),a("h5",{attrs:{id:"请求权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求权限"}},[n._v("#")]),n._v(" 请求权限")]),n._v(" "),a("p",[n._v("当用户还没选择的时候，我们需要向用户去请求权限。Notification 对象提供了 requestPermission() 方法请求用户当前来源的权限以显示通知。")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("Notification.requestPermission().then(function(permission) {\n    if(permission === 'granted'){\n        console.log('用户允许通知');\n    }else if(permission === 'denied'){\n        console.log('用户拒绝通知');\n    }\n});\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br")])]),a("h5",{attrs:{id:"推送通知"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#推送通知"}},[n._v("#")]),n._v(" 推送通知")]),n._v(" "),a("p",[n._v("获取用户授权之后，就可以推送通知了。")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("var notification = new Notification(title, options);\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[n._v("参数如下：")]),n._v(" "),a("ol",[a("li",[n._v("title：通知的标题")]),n._v(" "),a("li",[n._v("options：通知的设置选项（可选）。")])]),n._v(" "),a("ul",[a("li",[n._v("body：通知的内容。")]),n._v(" "),a("li",[n._v("tag：代表通知的一个识别标签，相同tag时只会打开同一个通知窗口。")]),n._v(" "),a("li",[n._v("icon：要在通知中显示的图标的URL。")]),n._v(" "),a("li",[n._v("icon：要在通知中显示的图标的URL。")]),n._v(" "),a("li",[n._v("data：想要和通知关联的任务类型的数据。")]),n._v(" "),a("li",[n._v("requireInteraction：通知保持有效不自动关闭，默认为false。")])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("var n = new Notification('状态更新提醒',{\n    body: '你的朋友圈有3条新状态，快去查看吧',\n    tag: 'linxin',\n    icon: 'http://blog.gdfengshuo.com/images/avatar.jpg',\n    requireInteraction: true\n})\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br")])]),a("h5",{attrs:{id:"事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件"}},[n._v("#")]),n._v(" 事件")]),n._v(" "),a("p",[n._v("Notification 接口的 onclick属性指定一个事件侦听器来接收 click 事件。当点击通知窗口时会触发相应事件，比如打开一个网址，引导用户回到自己的网站去。")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("var n = new Notification('状态更新提醒',{\n    body: '你的朋友圈有3条新状态，快去查看吧',\n    tag: 'linxin',\n    icon: 'http://blog.gdfengshuo.com/images/avatar.jpg',\n    requireInteraction: true,\n    data: {\n        url: 'http://myzhangning.top'\n    }\n})\nn.onclick = function(){\n    window.open(n.data.url, '_blank');      // 打开网址\n    n.close();                              // 并且关闭通知\n}\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);